---
title: "MySQL ì¿¼ë¦¬ íŠœë‹ì˜ ì²«ê±¸ìŒ: 'EXPLAIN'ìœ¼ë¡œ ì‹¤í–‰ ê³„íš ë¶„ì„í•˜ê¸°"
date: 2025-11-15
categories: [Database, Performance]
tags: [MySQL, EXPLAIN, Query Tuning, Performance, Index, Optimizer, TIL]
excerpt: "JPAë‚˜ QueryDSLì´ ìƒì„±í•œ ì¿¼ë¦¬ê°€ 'ì™œ' ëŠë¦°ì§€ íŒŒì•…í•˜ëŠ” ë°©ë²•ì„ í•™ìŠµí•©ë‹ˆë‹¤. MySQLì˜ 'EXPLAIN' ëª…ë ¹ì–´ë¥¼ í†µí•´ ì¿¼ë¦¬ ì‹¤í–‰ ê³„íšì„ ì½ê³ , 'type'ê³¼ 'Extra' ì»¬ëŸ¼ì„ ì¤‘ì‹¬ìœ¼ë¡œ ë³‘ëª© ì§€ì ì„ ì°¾ì•„ ì¸ë±ìŠ¤ë¥¼ ìµœì í™”í•˜ëŠ” ì‹¤ì „ íŠœë‹ ë°©ë²•ì„ ì•Œì•„ë´…ë‹ˆë‹¤."
author_profile: true
---

# Today I Learned: MySQL ì¿¼ë¦¬ íŠœë‹ì˜ ì²«ê±¸ìŒ: 'EXPLAIN'ìœ¼ë¡œ ì‹¤í–‰ ê³„íš ë¶„ì„í•˜ê¸°

## ðŸ“š ì˜¤ëŠ˜ í•™ìŠµí•œ ë‚´ìš©

JPA, QueryDSL, MyBatis ë“± ë‹¤ì–‘í•œ ë„êµ¬ë¥¼ ì‚¬ìš©í•´ ì¿¼ë¦¬ë¥¼ ìž‘ì„±í•´ì™”ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì½”ë“œê°€ ë³µìž¡í•´ì§€ê³  ë°ì´í„°ê°€ ìŒ“ì´ë©´ì„œ, "ë¶„ëª… ë¡œì»¬ì—ì„œëŠ” ë¹¨ëžëŠ”ë°, ìš´ì˜ ì„œë²„ì—ì„œëŠ” ì´ ì¿¼ë¦¬ê°€ ì™œ ì´ë ‡ê²Œ ëŠë¦¬ì§€?"í•˜ëŠ” ë¬¸ì œì— ë¶€ë”ªížˆê¸° ì‹œìž‘í–ˆìŠµë‹ˆë‹¤.

ë‹¨ìˆœížˆ ì¸ë±ìŠ¤ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì„ ë„˜ì–´, **MySQL ì˜µí‹°ë§ˆì´ì €ê°€ ë‚´ ì¿¼ë¦¬ë¥¼ ì–´ë–»ê²Œ í•´ì„í•˜ê³  ì‹¤í–‰í•˜ëŠ”ì§€** ê·¸ 'ì‹¤í–‰ ê³„íš'ì„ ì§ì ‘ ëˆˆìœ¼ë¡œ í™•ì¸í•˜ëŠ” ê²ƒì´ íŠœë‹ì˜ ì‹œìž‘ìž„ì„ ê¹¨ë‹¬ì•˜ìŠµë‹ˆë‹¤. ì˜¤ëŠ˜ì€ ê·¸ í•µì‹¬ ë„êµ¬ì¸ **`EXPLAIN`**ì— ëŒ€í•´ í•™ìŠµí–ˆìŠµë‹ˆë‹¤.

---

### 1. **`EXPLAIN`ì´ëž€ ë¬´ì—‡ì¸ê°€? ðŸ—ºï¸**

**`EXPLAIN`**ì€ `SELECT` ì¿¼ë¦¬ ë¬¸ ì•žì— ë¶™ì—¬ ì‚¬ìš©í•˜ëŠ” MySQL ëª…ë ¹ì–´ìž…ë‹ˆë‹¤. ì´ ëª…ë ¹ì„ ì‹¤í–‰í•˜ë©´, ì¿¼ë¦¬ê°€ ì‹¤ì œë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, MySQL ì˜µí‹°ë§ˆì´ì €ê°€ ì´ ì¿¼ë¦¬ë¥¼ **ì–´ë–¤ ìˆœì„œë¡œ, ì–´ë–¤ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•´, ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í• ì§€**ì— ëŒ€í•œ ìƒì„¸í•œ 'ê³„íšì„œ'ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.

ì´ ê³„íšì„œë¥¼ í†µí•´ ê°œë°œìžëŠ” ì¿¼ë¦¬ì˜ ë¹„íš¨ìœ¨ì ì¸ ë¶€ë¶„ì„ ì •í™•ížˆ ì°¾ì•„ë‚¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

---

### 2. **`EXPLAIN`ì˜ í•µì‹¬ ì»¬ëŸ¼ ì½ëŠ” ë²• (3~4ë…„ì°¨ í•„ë…!)**

`EXPLAIN`ì„ ì‹¤í–‰í•˜ë©´ ì—¬ëŸ¬ ì»¬ëŸ¼ì´ ë‚˜ì˜¤ì§€ë§Œ, 3~4ë…„ì°¨ ê°œë°œìžë¡œì„œ ì„±ëŠ¥ì— ì§ê²°ë˜ëŠ” ë‹¤ìŒ 4ê°€ì§€ ì»¬ëŸ¼ì€ ë°˜ë“œì‹œ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.



#### **â‘  `type`: ì¿¼ë¦¬ì˜ 'ì¹˜ëª…ë„' (ê°€ìž¥ ì¤‘ìš”!)**
ì¿¼ë¦¬ê°€ ì–¼ë§ˆë‚˜ íš¨ìœ¨ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì°¾ì•˜ëŠ”ì§€ ë³´ì—¬ì£¼ëŠ” í•µì‹¬ ì§€í‘œìž…ë‹ˆë‹¤. **ìœ„ì—ì„œ ì•„ëž˜ë¡œ ê°ˆìˆ˜ë¡ ì¹˜ëª…ì ìœ¼ë¡œ ëŠë¦° ë°©ì‹**ìž…ë‹ˆë‹¤.

-   **`const` / `system`**: (BEST) Primary Keyë‚˜ Unique Keyë¡œ ë‹¨ í•˜ë‚˜ì˜ í–‰(Row)ì„ ì°¾ëŠ” ë°©ì‹. ê°€ìž¥ ë¹ ë¦…ë‹ˆë‹¤.
-   **`eq_ref`**: (GOOD) JOIN ì‹œ Primary Keyë‚˜ Unique Keyë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ì‹.
-   **`ref`**: (GOOD) `eq_ref`ì™€ ìœ ì‚¬í•˜ë‚˜, ë¹„-ê³ ìœ (Non-unique) ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ `NULL` ë¹„êµë¥¼ í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.
-   **`range`**: (NORMAL) ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • 'ë²”ìœ„'ë¥¼ ìŠ¤ìº”í•˜ëŠ” ë°©ì‹ (`BETWEEN`, `>`, `<`).
-   --- (ì—¬ê¸°ì„œë¶€í„° íŠœë‹ ê³ ë ¤) ---
-   **`index`**: (BAD) ì¸ë±ìŠ¤ ì „ì²´ë¥¼ ìŠ¤ìº”(Full Index Scan)í•˜ëŠ” ë°©ì‹. `ALL`ë³´ë‹¤ëŠ” ë¹ ë¥´ì§€ë§Œ, ì¸ë±ìŠ¤ê°€ ë§¤ìš° í¬ë‹¤ë©´ ëŠë¦½ë‹ˆë‹¤.
-   **`ALL`**: (WORST) **í’€ í…Œì´ë¸” ìŠ¤ìº”(Full Table Scan)**. ì¸ë±ìŠ¤ë¥¼ ì „í˜€ ì‚¬ìš©í•˜ì§€ ëª»í•˜ê³  í…Œì´ë¸” ì „ì²´ë¥¼ ì½ëŠ” ìµœì•…ì˜ ìƒí™©ìž…ë‹ˆë‹¤. ë°ì´í„°ê°€ ë§Žë‹¤ë©´ ë°˜ë“œì‹œ íŠœë‹í•´ì•¼ í•©ë‹ˆë‹¤.

#### **â‘¡ `key`: 'ì‹¤ì œë¡œ ì‚¬ìš©í•œ' ì¸ë±ìŠ¤**
ì˜µí‹°ë§ˆì´ì €ê°€ ì´ ì¿¼ë¦¬ë¥¼ ìœ„í•´ **ìµœì¢…ì ìœ¼ë¡œ ì„ íƒí•œ ì¸ë±ìŠ¤**ì˜ ì´ë¦„ìž…ë‹ˆë‹¤. ì´ ê°’ì´ `NULL`ì´ë¼ë©´ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ëª»í•œ ê²ƒìž…ë‹ˆë‹¤.

#### **â‘¢ `rows`: 'ì˜ˆìƒë˜ëŠ”' ìŠ¤ìº” í–‰ ìˆ˜**
ì¿¼ë¦¬ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ìŠ¤ìº”í•  ê²ƒìœ¼ë¡œ **ì˜ˆìƒë˜ëŠ”** í–‰ì˜ ìˆ˜ìž…ë‹ˆë‹¤. ì´ ìˆ˜ì¹˜ê°€ ë¹„ì •ìƒì ìœ¼ë¡œ í¬ë‹¤ë©´ ì¿¼ë¦¬ë‚˜ ì¸ë±ìŠ¤ ì„¤ê³„ë¥¼ ì˜ì‹¬í•´ë´ì•¼ í•©ë‹ˆë‹¤.

#### **â‘£ `Extra`: 'ì£¼ëª©í•´ì•¼ í• ' ì¶”ê°€ ì •ë³´ (ë§¤ìš° ì¤‘ìš”!)**
ì˜µí‹°ë§ˆì´ì €ê°€ ì¿¼ë¦¬ë¥¼ ì–´ë–»ê²Œ ì²˜ë¦¬í–ˆëŠ”ì§€ì— ëŒ€í•œ ë¶€ê°€ ì •ë³´ì´ë©°, ì„±ëŠ¥ íŠœë‹ì˜ í•µì‹¬ ë‹¨ì„œê°€ ë“¤ì–´ìžˆìŠµë‹ˆë‹¤.

-   **`Using index` (GOOD)**
    -   **"ì»¤ë²„ë§ ì¸ë±ìŠ¤(Covering Index)"**ê°€ ë™ìž‘í–ˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
    -   ì¿¼ë¦¬ì— í•„ìš”í•œ ëª¨ë“  ë°ì´í„°ê°€ **ì¸ë±ìŠ¤ ë‚´ì—** ì¡´ìž¬í•˜ì—¬, ì‹¤ì œ ë°ì´í„° í…Œì´ë¸”(í´ëŸ¬ìŠ¤í„°ë“œ ì¸ë±ìŠ¤)ì„ ì¶”ê°€ë¡œ ì½ì„ í•„ìš”ê°€ ì—†ë‹¤ëŠ” ëœ»ìž…ë‹ˆë‹¤. (ì´ì¤‘ ì¡°íšŒ ë°©ì§€)
-   **`Using where`**
    -   ì¸ë±ìŠ¤ë¡œ 1ì°¨ í•„í„°ë§ì„ í•œ í›„, ë‚¨ì€ ë°ì´í„°ë“¤ì„ ëŒ€ìƒìœ¼ë¡œ `WHERE` ì ˆì˜ ë‹¤ë¥¸ ì¡°ê±´ìœ¼ë¡œ 2ì°¨ í•„í„°ë§(ê°€ê³µ)ì„ ìˆ˜í–‰í–ˆë‹¤ëŠ” ì˜ë¯¸ìž…ë‹ˆë‹¤.
-   **`Using filesort` (BAD)**
    -   `ORDER BY`ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ëª»í•˜ê³ , ë³„ë„ì˜ **ì •ë ¬(Sort) ìž‘ì—…**ì„ ë©”ëª¨ë¦¬ ë˜ëŠ” ë””ìŠ¤í¬ì—ì„œ ìˆ˜í–‰í–ˆë‹¤ëŠ” ì˜ë¯¸ìž…ë‹ˆë‹¤. ì‹¬ê°í•œ ì„±ëŠ¥ ì €í•˜ë¥¼ ìœ ë°œí•©ë‹ˆë‹¤.
-   **`Using temporary` (WORST)**
    -   ì¿¼ë¦¬ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ **ìž„ì‹œ í…Œì´ë¸”**ì„ ìƒì„±í–ˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. (e.g., `GROUP BY`ì™€ `ORDER BY`ì˜ ì»¬ëŸ¼ì´ ë‹¤ë¥¼ ë•Œ). `filesort`ë³´ë‹¤ ë” ì‹¬ê°í•œ ì„±ëŠ¥ ì €í•˜ì˜ ì£¼ë²”ìž…ë‹ˆë‹¤.

---

### 3. **ì‹¤ì „ ì‹œë‚˜ë¦¬ì˜¤: `EXPLAIN`ìœ¼ë¡œ íŠœë‹í•˜ê¸°**

-   **ì¿¼ë¦¬**: `username`ì— ì¸ë±ìŠ¤ê°€ ê±¸ë ¤ìžˆë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.
-   **JPA/QueryDSL**ì´ ì•„ëž˜ì™€ ê°™ì€ ì¿¼ë¦¬ë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤.

**[BEFORE] íŠœë‹ ì „ ì¿¼ë¦¬ (ëŠë¦¼)**
```sql
-- usernameê³¼ emailë§Œ í•„ìš”í•œë° SELECT * ë¥¼ í•¨
EXPLAIN SELECT * FROM users 
WHERE username = 'testuser' 
ORDER BY created_at DESC;
```
**ì˜ˆìƒ ê²°ê³¼ (BAD):**
-   `type`: `ref` (username ì¸ë±ìŠ¤ëŠ” ìž˜ íƒ”ìŒ)
-   `key`: `idx_username`
-   `Extra`: **`Using filesort`**
-   **ë¶„ì„**: `username` ì¸ë±ìŠ¤ë¡œ ë°ì´í„°ëŠ” ìž˜ ì°¾ì•˜ì§€ë§Œ, `ORDER BY created_at`ì„ ìœ„í•´ **ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ëª»í•˜ê³ ** ì°¾ì•„ë‚¸ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ì •ë ¬í•˜ëŠ” `filesort`ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

**[AFTER] íŠœë‹ í›„ (ì¸ë±ìŠ¤ ë³€ê²½)**
`username`ê³¼ `created_at`ì„ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§Žë‹¤ëŠ” ê²ƒì„ íŒŒì•…í•˜ê³  **ë³µí•© ì¸ë±ìŠ¤**ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```sql
CREATE INDEX idx_username_created_at ON users (username, created_at DESC);
```
**ì˜ˆìƒ ê²°ê³¼ (GOOD):**
-   `type`: `ref`
-   `key`: `idx_username_created_at`
-   `Extra`: `Using index condition` (MySQL 5.6+)
-   **ë¶„ì„**: `filesort`ê°€ ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤! ìƒˆë¡œìš´ ë³µí•© ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ë ¬ ìž‘ì—…ê¹Œì§€ ì¸ë±ìŠ¤ ë‚´ì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìžˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## ðŸ’¡ ë°°ìš´ ì 

1.  **JPA/QueryDSLì„ ë§¹ì‹ í•˜ì§€ ë§ìž**: 3~4ë…„ì°¨ê°€ ë˜ë©´ì„œ JPAì˜ íŽ¸ë¦¬í•¨ì— ìµìˆ™í•´ì ¸, ë‚´ê°€ ìž‘ì„±í•œ ì½”ë“œê°€ ì–´ë–¤ SQLë¡œ ë³€í™˜ë˜ëŠ”ì§€ ë¬´ê´€ì‹¬í•´ì§€ê¸° ì‰¬ì› ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ `EXPLAIN`ì„ í†µí•´ ì˜µí‹°ë§ˆì´ì €ì˜ ìƒê°ì„ ì½ëŠ” ë²•ì„ ë°°ìš°ë‹ˆ, ë¹„íš¨ìœ¨ì ì¸ ì¿¼ë¦¬ë¥¼ ëŠ¥ë™ì ìœ¼ë¡œ ì°¾ì•„ë‚´ê³  ê°œì„ í•  ìˆ˜ ìžˆëŠ” 'ë¬´ê¸°'ë¥¼ ì–»ì€ ê¸°ë¶„ìž…ë‹ˆë‹¤.
2.  **ì„±ëŠ¥ íŠœë‹ì˜ ëª©í‘œëŠ” `type`ê³¼ `Extra`ë‹¤**: ì¿¼ë¦¬ íŠœë‹ì˜ ëª©í‘œëŠ” `type` ì»¬ëŸ¼ì„ `ALL`ì´ë‚˜ `index`ì—ì„œ ìµœì†Œ `range`ë‚˜ `ref`ë¡œ ë°”ê¾¸ê³ , `Extra` ì»¬ëŸ¼ì˜ `Using filesort`, `Using temporary`ë¥¼ ì œê±°í•˜ëŠ” ê²ƒìž„ì„ ëª…í™•ížˆ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
3.  **ì»¤ë²„ë§ ì¸ë±ìŠ¤(`Using index`)ì˜ ì¤‘ìš”ì„±**: `SELECT *`ê°€ ì™œ ë‚˜ìœì§€, DTO í”„ë¡œì ì…˜ì´ ì™œ ì¤‘ìš”í•œì§€ `EXPLAIN`ì˜ `Using index`ê°€ ëª…í™•ížˆ ë³´ì—¬ì£¼ì—ˆìŠµë‹ˆë‹¤. ì¸ë±ìŠ¤ ì„¤ê³„ëŠ” `WHERE`ì ˆë¿ë§Œ ì•„ë‹ˆë¼ `SELECT`ì ˆê¹Œì§€ ê³ ë ¤í•´ì•¼ í•¨ì„ ê¹¨ë‹¬ì•˜ìŠµë‹ˆë‹¤.

---

## ðŸ”— ì°¸ê³  ìžë£Œ

-   [MySQL Docs - EXPLAIN Output Format](https://dev.mysql.com/doc/refman/8.0/en/explain-output.html)
-   [MySQL Docs - Optimizing Queries with EXPLAIN](https://dev.mysql.com/doc/refman/8.0/en/using-explain.html)
-   [Real MySQL 8.0 (Book)](https://www.yes24.com/Product/Goods/103217451)