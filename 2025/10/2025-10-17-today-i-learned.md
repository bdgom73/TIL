---
title: "Blue/Green λ¬΄μ¤‘λ‹¨ λ°°ν¬ μ „λµμ μ΄ν•΄"
date: 2025-10-17
categories: [DevOps, CI/CD]
tags: [Deployment Strategy, Blue/Green, High Availability, CI/CD, Canary, TIL]
excerpt: "μ• ν”λ¦¬μΌ€μ΄μ… λ°°ν¬ μ‹ μ„λΉ„μ¤ μ¤‘λ‹¨μ„ μ—†μ• κ³  μ•μ •μ„±μ„ κ·Ήλ€ν™”ν•λ” Blue/Green λ°°ν¬ μ „λµμ„ ν•™μµν•©λ‹λ‹¤. μ΄ μ „λµμ λ™μ‘ μ›λ¦¬μ™€ μ¥λ‹¨μ , κ·Έλ¦¬κ³  λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§ λ³€κ²½κ³Ό κ°™μ€ μ‹¤μ „ κ³ λ ¤μ‚¬ν•­μ„ μ•μ•„λ΄…λ‹λ‹¤."
author_profile: true
---

# Today I Learned: Blue/Green λ¬΄μ¤‘λ‹¨ λ°°ν¬ μ „λµμ μ΄ν•΄

## π“ μ¤λ ν•™μµν• λ‚΄μ©

μƒλ΅μ΄ λ²„μ „μ μ• ν”λ¦¬μΌ€μ΄μ…μ„ λ°°ν¬ν•  λ•, κ°€μ¥ ν° κ³ λ―Όμ€ 'μ–΄λ–»κ² μ„λΉ„μ¤ μ¤‘λ‹¨(Downtime) μ—†μ΄ μ•μ „ν•κ² μ „ν™ν•  κ²ƒμΈκ°€'μ…λ‹λ‹¤. κΈ°μ΅΄ μ„λ²„λ¥Ό λ‚΄λ¦¬κ³  μƒ μ„λ²„λ¥Ό μ¬λ¦¬λ” λ‹¨μν• λ°©μ‹μ€ ν•„μ—°μ μΌλ΅ μ„λΉ„μ¤ μ¤‘λ‹¨μ„ μ λ°ν•©λ‹λ‹¤. μ¤λμ€ μ΄λ¬ν• λ¬Έμ λ¥Ό ν•΄κ²°ν•κ³  μ•μ •μ μΈ λ°°ν¬λ¥Ό κ°€λ¥ν•κ² ν•λ” **Blue/Green λ°°ν¬ μ „λµ**μ— λ€ν•΄ κΉμ΄ μκ² ν•™μµν–μµλ‹λ‹¤.

---

### 1. **Blue/Green λ°°ν¬λ€ λ¬΄μ—‡μΈκ°€? π”µπΆ**

**Blue/Green λ°°ν¬**λ” **λ™μΌν• κµ¬μ„±μ λ‘ κ° ν™κ²½**μ„ μ¤€λΉ„ν•μ—¬, ν•λ‚λ” ν„μ¬ μ΄μ λ²„μ „(Blue)μΌλ΅ μ‚¬μ©ν•κ³  λ‹¤λ¥Έ ν•λ‚λ” μƒλ΅μ΄ λ²„μ „(Green)μ„ λ°°ν¬ν•λ” μ „λµμ…λ‹λ‹¤. λ°°ν¬κ°€ μ™„λ£λκ³  κ²€μ¦μ΄ λλ‚λ©΄, λΌμ°ν„°μ νΈλν”½μ„ Blueμ—μ„ GreenμΌλ΅ ν• λ²μ— μ „ν™ν•μ—¬ μ‚¬μ©μλ“¤μ΄ μƒλ΅μ΄ λ²„μ „μ„ μ‚¬μ©ν•κ² ν•©λ‹λ‹¤.

-   **Blue Environment**: ν„μ¬ μ‹¤μ  μ΄μ νΈλν”½μ„ μ²λ¦¬ν•κ³  μλ” ν™κ²½ (κµ¬ λ²„μ „).
-   **Green Environment**: μƒλ΅ λ°°ν¬λ  λ²„μ „μ„ μ¤€λΉ„ν•κ³  ν…μ¤νΈν•λ” λ€κΈ° ν™κ²½ (μ‹  λ²„μ „).

**λΉ„μ **: λ‘ κ°μ λ‘κ°™μ€ λ¬΄λ€(A, B)λ¥Ό κ°€μ§„ κ³µμ—°μ¥κ³Ό κ°™μµλ‹λ‹¤. κ΄€κ°λ“¤μ΄ A λ¬΄λ€μ—μ„ κ³µμ—°μ„ λ³΄λ” λ™μ•, B λ¬΄λ€μ—μ„λ” λ‹¤μ κ³µμ—°μ„ μ„ν• λ¨λ“  μ„Έν…μ„ μ™„λ²½ν•κ² λ§μΉ©λ‹λ‹¤. μ¤€λΉ„κ°€ λλ‚λ©΄, μ»¤νΌμ„ λ‚΄λ ¤ A λ¬΄λ€λ¥Ό κ°€λ¦¬κ³  B λ¬΄λ€μ λ§‰μ„ μ¬λ ¤ κ΄€κ°λ“¤μ΄ μ¦‰μ‹ λ‹¤μ κ³µμ—°μ„ λ³΄κ² ν•λ” κ²ƒκ³Ό κ°™μµλ‹λ‹¤.



---

### 2. **Blue/Green λ°°ν¬μ λ‹¨κ³„λ³„ νλ¦„**

1.  **μ΄κΈ° μƒνƒ**: ν„μ¬ **Blue** ν™κ²½μ΄ λ΅λ“ λ°Έλ°μ„λ¥Ό ν†µν•΄ λ¨λ“  μ‹¤μ‹κ°„ νΈλν”½μ„ λ°›κ³  μμµλ‹λ‹¤. **Green** ν™κ²½μ€ λ€κΈ° μ¤‘μ΄κ±°λ‚ μ΄μ „ λ²„μ „μ μ½”λ“λ¥Ό κ°€μ§€κ³  μμµλ‹λ‹¤.

2.  **μ‹ κ· λ²„μ „ λ°°ν¬**: μƒλ΅μ΄ λ²„μ „μ μ• ν”λ¦¬μΌ€μ΄μ…μ„ **Green** ν™κ²½μ— λ°°ν¬ν•©λ‹λ‹¤. μ΄ κ³Όμ •μ€ μ‹¤μ  μ‚¬μ©μ νΈλν”½μ— μ „ν€ μν–¥μ„ μ£Όμ§€ μ•μµλ‹λ‹¤.

3.  **Green ν™κ²½ κ²€μ¦**: Green ν™κ²½μ—λ§ μ ‘κ·Όν•  μ μλ” λ‚΄λ¶€ URLμ΄λ‚ νΉμ • ν—¤λ” κ°’μ„ ν†µν•΄ QAν€μ΄λ‚ κ°λ°ν€μ΄ μƒλ΅μ΄ λ²„μ „μ΄ μλ„λ€λ΅ μ λ™μ‘ν•λ”μ§€ μ¶©λ¶„ν ν…μ¤νΈν•©λ‹λ‹¤. (e.g., Smoke Test, κΈ°λ¥ ν…μ¤νΈ)

4.  **νΈλν”½ μ „ν™**: λ¨λ“  κ²€μ¦μ΄ μ™„λ£λλ©΄, **λ΅λ“ λ°Έλ°μ„(λΌμ°ν„°)**μ μ„¤μ •μ„ λ³€κ²½ν•μ—¬ λ¨λ“  νΈλν”½μ΄ Blueκ°€ μ•„λ‹ **Green** ν™κ²½μ„ ν–¥ν•λ„λ΅ ν• λ²μ— μ „ν™ν•©λ‹λ‹¤. μ΄μ  Greenμ΄ μƒλ΅μ΄ μ΄μ(Active) ν™κ²½μ΄ λ©λ‹λ‹¤.

5.  **μ „ν™ ν›„**: Blue ν™κ²½μ€ μ΄μ  λ€κΈ°(Idle) μƒνƒκ°€ λ©λ‹λ‹¤. λ§μ•½ Green ν™κ²½μ—μ„ μκΈ°μΉ μ•μ€ μ‹¬κ°ν• λ¬Έμ κ°€ λ°μƒν•  κ²½μ°, **μ¦‰μ‹ λ΅¤λ°±**μ΄ ν•„μ”ν•λ©΄ λΌμ°ν„°μ νΈλν”½μ„ λ‹¤μ‹ Blue ν™κ²½μΌλ΅ λλ¦¬κΈ°λ§ ν•λ©΄ λ©λ‹λ‹¤. λ¬Έμ κ°€ μ—†λ‹¤λ©΄, Blue ν™κ²½μ€ λ‹¤μ λ°°ν¬λ¥Ό μ„ν• λ€κΈ° ν™κ²½μ΄ λκ±°λ‚ λ¦¬μ†μ¤λ¥Ό μ μ•½ν•κΈ° μ„ν•΄ μΆ…λ£λ  μ μμµλ‹λ‹¤.

---

### 3. **μ¥μ κ³Ό λ‹¨μ  (κ·Έλ¦¬κ³  μ‹¤μ „ κ³ λ ¤μ‚¬ν•­)**

#### **μ¥μ  π‘**

-   **μ λ΅ λ‹¤μ΄νƒ€μ„ (Zero Downtime)**: νΈλν”½ μ „ν™μ΄ μκ°„μ μΌλ΅ μΌμ–΄λ‚λ―€λ΅ μ‚¬μ©μλ” μ„λΉ„μ¤ μ¤‘λ‹¨μ„ μ „ν€ λλΌμ§€ λ»ν•©λ‹λ‹¤.
-   **μ¦‰κ°μ μΈ λ΅¤λ°± (Instant Rollback)**: μ‹ κ· λ²„μ „μ— λ¬Έμ κ°€ μƒκ²Όμ„ λ•, νΈλν”½μ„ κµ¬ λ²„μ „(Blue)μΌλ΅ λ‹¤μ‹ λλ¦¬κΈ°λ§ ν•λ©΄ λλ―€λ΅ λ§¤μ° λΉ λ¥΄κ³  μ•μ •μ μΈ λ΅¤λ°±μ΄ κ°€λ¥ν•©λ‹λ‹¤.
-   **λ‚®μ€ λ°°ν¬ λ¦¬μ¤ν¬**: μ‹¤μ  μ΄μ νΈλν”½μ— μν–¥μ„ μ£Όμ§€ μ•λ” κ²©λ¦¬λ ν™κ²½μ—μ„ μ‹ κ· λ²„μ „μ„ μ¶©λ¶„ν ν…μ¤νΈν•  μ μμµλ‹λ‹¤.

#### **λ‹¨μ  λ° κ³ λ ¤μ‚¬ν•­ π‘**

-   **μΈν”„λΌ λΉ„μ©**: λ™μΌν• ν™κ²½μ„ 2μ„ΈνΈ μ μ§€ν•΄μ•Ό ν•λ―€λ΅, μ„λ²„μ™€ μΈν”„λΌ λΉ„μ©μ΄ κ±°μ λ‘ λ°°λ΅ λ“­λ‹λ‹¤.
-   **λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§ κ΄€λ¦¬**: Blue/Green λ°°ν¬μ κ°€μ¥ ν° λ‚κ΄€μ…λ‹λ‹¤. λ§μ•½ μ‹ κ· λ²„μ „μ΄ DB μ¤ν‚¤λ§ λ³€κ²½(e.g., μ»¬λΌ μ¶”κ°€/μ‚­μ )μ„ ν¬ν•¨ν•λ‹¤λ©΄, κµ¬ λ²„μ „(Blue)κ³Ό μ‹  λ²„μ „(Green)μ΄ λ™μ‹μ— λ™μΌν• DBλ¥Ό λ°”λΌλ³΄λ” μ§§μ€ μ‹κ°„ λ™μ• νΈν™μ„± λ¬Έμ κ°€ λ°μƒν•  μ μμµλ‹λ‹¤.
    -   **ν•΄κ²°μ±…**: DB μ¤ν‚¤λ§ λ³€κ²½μ€ μ• ν”λ¦¬μΌ€μ΄μ… λ°°ν¬μ™€ λ¶„λ¦¬ν•μ—¬ μ²λ¦¬ν•΄μ•Ό ν•©λ‹λ‹¤. ν•μ„ νΈν™μ„±μ„ μ μ§€ν•λ” λ°©ν–¥μΌλ΅ μ μ§„μ μΌλ΅ μ¤ν‚¤λ§λ¥Ό λ³€κ²½ν•λ” μ „λµμ΄ ν•„μ”ν•©λ‹λ‹¤. (e.g., 1λ‹¨κ³„: μ»¬λΌ μ¶”κ°€ -> 2λ‹¨κ³„: μ‹ κ· λ²„μ „ λ°°ν¬ -> 3λ‹¨κ³„: κµ¬ λ²„μ „ μ½”λ“μ—μ„λ§ μ‚¬μ©ν•λ μ»¬λΌ μ‚­μ )
-   **μƒνƒ κ΄€λ¦¬(Stateful) μ• ν”λ¦¬μΌ€μ΄μ…**: μ‚¬μ©μμ μ„Έμ… μ •λ³΄ λ“±μ„ μ„λ²„ λ©”λ¨λ¦¬μ— μ €μ¥ν•λ” κ²½μ°, νΈλν”½ μ „ν™ μ‹ μ„Έμ…μ΄ μ μ‹¤λ  μ μμµλ‹λ‹¤. μ„Έμ…μ€ Redisμ™€ κ°™μ€ μ™Έλ¶€ μ¤ν† λ¦¬μ§€μ—μ„ κ³µμ ν•μ—¬ κ΄€λ¦¬ν•΄μ•Ό ν•©λ‹λ‹¤.

---

## π’΅ λ°°μ΄ μ 

1.  **λ°°ν¬λ” λ‹¨μν• νμΌ λ³µμ‚¬κ°€ μ•„λ‹λ‹¤**: μ•μ •μ μΈ λ°°ν¬λ” μΉλ°€ν•κ² κ³„νλ 'μ „λµ'μ μμ—­μ„μ„ κΉ¨λ‹¬μ•μµλ‹λ‹¤. Blue/Green λ°°ν¬λ” μΈν”„λΌ μμ›μ„ ν™μ©ν•μ—¬ μ„ν—μ„ μµμ†ν™”ν•κ³  μ•μ •μ„±μ„ κ·Ήλ€ν™”ν•λ” λ§¤μ° ν¨κ³Όμ μΈ μ—”μ§€λ‹μ–΄λ§ μ‹¤μ² λ°©λ²•μ…λ‹λ‹¤.
2.  **λ°μ΄ν„°λ² μ΄μ¤λ” μ–Έμ λ‚ λ°λ©μ„ μ΅λ”λ‹¤**: μ•„λ¬΄λ¦¬ λ°°ν¬ μ „λµμ΄ ν›λ¥­ν•΄λ„, κ³µμ  μμ›μΈ λ°μ΄ν„°λ² μ΄μ¤μ μƒνƒλ¥Ό μ–΄λ–»κ² κ΄€λ¦¬ν•  κ²ƒμΈμ§€μ— λ€ν• κ³ λ―Όμ΄ μ—†λ‹¤λ©΄ λ¬΄μ©μ§€λ¬Όμ΄ λ  μ μμµλ‹λ‹¤. μ• ν”λ¦¬μΌ€μ΄μ…μ λ¬΄μ¤‘λ‹¨ λ°°ν¬λ¥Ό μ„ν•΄μ„λ” λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§μ ν•μ„ νΈν™μ„±μ„ μ μ§€ν•λ” λ¥λ ¥μ΄ ν•„μμ μ…λ‹λ‹¤.
3.  **μƒν™©μ— λ§λ” μ „λµ μ„ νƒ**: Blue/Green μ „λµμ€ μ•μ •μ μ΄μ§€λ§ λΉ„μ©μ΄ λ§μ΄ λ“­λ‹λ‹¤. νΈλν”½μ μΌλ¶€λ§ μƒλ΅μ΄ λ²„μ „μΌλ΅ λ³΄λ‚΄ μ μ§„μ μΌλ΅ ν…μ¤νΈν•λ” **μΉ΄λ‚λ¦¬(Canary) λ°°ν¬** λ“± λ‹¤λ¥Έ μ „λµλ“¤λ„ μ΅΄μ¬ν•©λ‹λ‹¤. μ„λΉ„μ¤μ νΉμ„±κ³Ό μ¤‘μ”λ„, λΉ„μ© λ“±μ„ μΆ…ν•©μ μΌλ΅ κ³ λ ¤ν•μ—¬ μµμ μ λ°°ν¬ μ „λµμ„ μ„ νƒν•λ” μ•λ©μ΄ ν•„μ”ν•¨μ„ λκΌμµλ‹λ‹¤.

---

## π”— μ°Έκ³  μλ£

-   [BlueGreenDeployment (Martin Fowler)](https://martinfowler.com/bliki/BlueGreenDeployment.html)
-   [What is blue/green deployment? (AWS)](https://aws.amazon.com/what-is/blue-green-deployment/)
-   [Deployment Strategies (Argo CD Documentation)](https://argo-cd.readthedocs.io/en/stable/operator-manual/applicationset/Controlling-Rollout/)