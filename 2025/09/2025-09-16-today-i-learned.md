---
title: "MySQL에서 실행 계획 분석하기"
date: 2025-09-16
categories: [MySQL, Database, Optimization]
tags: [MySQL, 실행 계획, 최적화, EXPLAIN]
excerpt: "MySQL에서 실행 계획을 분석하는 방법과 이를 활용한 쿼리 최적화 방법을 알아봅니다."
author_profile: true
---

# TIL: MySQL 실행 계획 분석

MySQL에서 실행 계획을 분석하는 방법은 `EXPLAIN` 명령어를 사용하는 것입니다. `EXPLAIN`은 쿼리 성능을 향상시키기 위해 어떻게 실행될 것인지에 대한 세부 정보를 제공합니다.

---

## 실행 계획 주요 필드 설명
`EXPLAIN`의 결과로 반환되는 주요 필드에 대해 알아보겠습니다:

- **key**: MySQL이 쿼리에 사용하려고 선택한 인덱스를 나타냅니다.
- **key_len**: MySQL이 사용하는 인덱스 길이를 보여줍니다. 이는 인덱스가 얼마나 효율적으로 사용되고 있는지에 대한 힌트를 제공합니다.
- **rows**: MySQL이 쿼리를 실행하기 위해 조회해야 하는 예상 행(row)의 수를 나타냅니다.
- **Extra**: 쿼리 실행에 대한 추가 정보를 제공합니다. 여기에는 `Using filesort`, `Using temporary` 등이 나타나며, 성능을 저하시킬 수 있는 요소를 확인할 수 있습니다.

---

## 실행 계획 사용 예시
```sql
EXPLAIN SELECT * FROM users WHERE age > 20;
```
위의 쿼리를 실행하면 MySQL의 옵티마이저(최적화기)가 생성한 실행 계획을 확인할 수 있으며, 이를 통해 인덱스가 제대로 사용되고 있는지 등의 정보를 얻을 수 있습니다.

---

## 효율적인 쿼리 최적화를 위한 팁
1. **인덱스 활용**: `WHERE`, `JOIN`, `ORDER BY`와 같은 조건절에 적절한 인덱스를 설정하세요.
2. **불필요한 데이터 조회 최소화**: `SELECT *` 대신 필요한 컬럼만 명시적으로 선택하세요.
3. **임시 테이블과 정렬 줄이기**: 쿼리를 재구성하여 임시 테이블(`Using temporary`)과 정렬(`Using filesort`)을 피하도록 설계하세요.
4. **통계 업데이트**: `ANALYZE TABLE` 명령어를 사용하여 테이블 통계를 정기적으로 업데이트하세요. 이는 옵티마이저가 더 나은 실행 계획을 수립하도록 도와줍니다.

---

## 최적화 실천 사례
- 쿼리 실행 계획으로 비효율적인 풀 테이블 스캔(Full Table Scan)을 찾아내어 해당 조건절에 인덱스를 추가하면 성능이 향상됩니다.
- 복잡한 서브쿼리를 JOIN으로 전환하여 쿼리 구조를 단순화할 수 있습니다.

---

MySQL의 `EXPLAIN` 명령어는 쿼리 성능을 최적화하는 데 매우 유용한 도구입니다. 주기적으로 실행 계획을 분석하고 쿼리를 개선하세요!